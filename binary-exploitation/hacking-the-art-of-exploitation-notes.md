# Hacking : The Art of Exploitation Notes

## RFC notes

* The internet protocol uses four key mechanisms in providing its   service:  Type of Service, Time to Live, Options, and Header Checksum.
  *  The Type of Service is used to indicate the quality of the service

      desired.  The type of service is an abstract or generalized set of

      parameters which characterize the service choices provided in the

      networks that make up the internet.  This type of service indication

      is to be used by gateways to select the actual transmission parameters

      for a particular network, the network to be used for the next hop, or

      the next gateway when routing an internet datagram.

  *   The Header Checksum provides a verification that the information used

      in processing internet datagram has been transmitted correctly.  The

      data may contain errors.  If the header checksum fails, the internet

      datagram is discarded at once by the entity which detects the error



* It's the Internet Protocol who decides where to route the data. At each stops, the local part \(the ethernet frame\) is removed, the content is passed to the IP module, which decide if it's for an application on this host or for somebody else, in which case it's decide what is the next hop, give to the Ethernet module this local address, which will re-create a local part and pass it to the first layer to move it



* The function or purpose of Internet Protocol is to move datagrams

    through an interconnected set of networks.  This is done by passing

    the datagrams from one internet module to another until the

    destination is reached.

* A distinction is made between names, addresses, and routes \[4\].   A

      name indicates what we seek.  An address indicates where it is.  A

      route indicates how to get there.  The internet protocol deals

      primarily with addresses.  It is the task of higher level \(i.e.,

      host-to-host or application\) protocols to make the mapping from

      names to addresses.   The internet module maps internet addresses to

      local net addresses.  It is the task of lower level \(i.e., local net

      or gateways\) procedures to make the mapping from local net addresses

      to routes.



## PLT & GOT

* Since a program could use a function in a shared library many times, it’s useful to have a table to reference all the functions. Another special section in compiled programs is used for this purpose—the procedure linkage table \(PLT\). This section consists of many jump instructions, each one corresponding to the address of a function. It works like a springboard—each time a shared function needs to be called, control will pass through the PLT.
  * the procedure linking table is shown to be read only.
  * they aren’t jumping to addresses but to pointers to addresses
  * These addresses exist in another section, called the global offset table \(GOT\), which is writable. These addresses can be directly obtained by displaying the dynamic relocation entries for the binary by using objdump.
  * . Another advantage of overwriting the GOT is that the GOT entries are fixed per binary, so a different system with the same binary will have the same GOT entry at the same add

## GDB

* One elegant solution to this problem is to attach to the process after it’s already running. In the output below, GDB is used to attach to an alreadyrunning tinyweb process that was started in another terminal. The source is recompiled using the -g option to include debugging symbols that GDB can apply to the running process. 
  * reader@hacking:~/booksrc $ ps aux \| grep tinyweb root 13019 0.0 0.0 1504 344 pts/0 S+ 20:25 0:00 ./tinyweb reader 13104 0.0 0.0 2880 748 pts/2 R+ 20:27 0:00 grep tinyweb reader@hacking:~/booksrc $ gcc -g tinyweb.c 
  * reader@hacking:~/booksrc $ sudo gdb -q --pid=13019 --symbols=./a.out 
  * Using host libthread\_db library "/lib/tls/i686/cmov/libthread\_db.so.1". Attaching to process 13019 /cow/home/reader/booksrc/tinyweb: No such file or directory. A program is being debugged already. Kill it? \(y or n\) n Program not killed.

## Bash commands

```text
reader@hacking:~/booksrc $ $(perl -e 'print "uname";') 
Linux 
reader@hacking:~/booksrc $ una$(perl -e 'print "m";')e
Linux
```

* `seq` in bash
  * for i in $\(seq 1 3 10\)
* The nm command lists symbols in object files. This can be used to find addresses of various functions in a program

